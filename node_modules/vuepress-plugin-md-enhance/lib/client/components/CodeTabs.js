import{useStorage as y}from"@vueuse/core";import{defineComponent as I,ref as m,shallowRef as g,onMounted as h,watch as S,h as r}from"vue";import"../styles/code-tabs.scss";const n=y("VUEPRESS_CODE_TAB_STORE",{});var k=I({name:"CodeTabs",props:{active:{type:Number,default:0},data:{type:Array,required:!0},id:{type:String,required:!0},tabId:{type:String,default:""}},setup(t,{slots:v}){const l=m(t.active),u=g([]),s=()=>{if(t.tabId){const{title:e,id:a=e}=t.data[l.value];n.value[t.tabId]=a}},c=(e=l.value)=>{l.value=e<u.value.length-1?e+1:0,u.value[l.value].focus()},b=(e=l.value)=>{l.value=e>0?e-1:u.value.length-1,u.value[l.value].focus()},f=(e,a)=>{if(e.key===" "||e.key==="Enter"?(e.preventDefault(),l.value=a):e.key==="ArrowRight"?(e.preventDefault(),c()):e.key==="ArrowLeft"&&(e.preventDefault(),b()),t.tabId){const{title:d,id:i=d}=t.data[l.value];n.value[t.tabId]=i}},p=()=>{if(t.tabId){const e=t.data.findIndex(({title:a,id:d=a})=>n.value[t.tabId]===d);if(e!==-1)return e}return t.active};return h(()=>{l.value=p(),S(()=>n.value[t.tabId],(e,a)=>{if(t.tabId&&e!==a){const d=t.data.findIndex(({title:i,id:o=i})=>o===e);d!==-1&&(l.value=d)}})}),()=>t.data.length?r("div",{class:"code-tabs"},[r("div",{class:"code-tabs-nav",role:"tablist"},t.data.map(({title:e},a)=>{const d=a===l.value;return r("button",{type:"button",ref:i=>{i&&(u.value[a]=i)},class:["code-tabs-nav-tab",{active:d}],role:"tab","aria-controls":`codetab-${t.id}-${a}`,"aria-selected":d,onClick:()=>{l.value=a,s()},onKeydown:i=>f(i,a)},e)})),t.data.map(({title:e,id:a=e},d)=>{var i;const o=d===l.value;return r("div",{class:["code-tab",{active:o}],id:`codetab-${t.id}-${d}`,role:"tabpanel","aria-expanded":o},(i=v[`tab${d}`])==null?void 0:i.call(v,{title:e,value:a,isActive:o}))})]):null}});export{k as default};
//# sourceMappingURL=CodeTabs.js.map
